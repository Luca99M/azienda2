function displayTodayTransactions() {
    // ... existing logic
    todayTransactionsArray = todayTransactionsArray.map(tx => ({
        ...tx,
        estimatedRevenue: Number(tx.importo || 0) // Updated Line
    }));
    renderTransactionsList(todayTransactionsArray, 'today-transactions'); // Updated Rendering Logic
    // ... existing logic
}

function applyOperatorFilter() {
    // ... existing logic
    filteredTransactionsArray = /* some filtering logic */;
    renderTransactionsList(filteredTransactionsArray, 'operator-transactions'); // Updated Rendering Logic
    // ... existing logic
}

function renderTransactionsList(transactions, containerId) {
    const container = document.getElementById(containerId);
    if (!container) return;
    if (!transactions || transactions.length === 0) {
        container.innerHTML = '<p style="color: #94a3b8; text-align: center;">Nessuna transazione</p>';
        return;
    }
    // ordina per data (più recente prima)
    transactions.sort((a,b) => new Date(b.timestamp || b.data || 0) - new Date(a.timestamp || a.data || 0));
    container.innerHTML = transactions.map(tx => {
        const time = tx.timestamp || tx.data || '';
        const importo = Number(tx.importo || 0);
        const tipoClass = (tx.tipo || '').toLowerCase();
        const note = tx.note ? `<div class=\"transaction-note\">${tx.note}</div>` : '';
        return `\
            <div class=\"transaction-item ${tipoClass}\">\n\
                <div class=\"transaction-time\">${time}</div>\n\
                <div class=\"transaction-text\">\n\
                    ${tx.descrizione || tx.prodotto || ''} \n\
                    <div class=\"transaction-amount\">€${importo.toFixed(2)}</div>\n\
                    ${note}\n\
                </div>\n\
            </div>\n\
        `;
    }).join('');
}