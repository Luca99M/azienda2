<!DOCTYPE html>
<html>
<head>
    <title>Test OAuth2</title>
    <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
    <h1>TEST OAUTH2</h1>
    <div id="status">Caricamento...</div>
    <button id="login-btn" onclick="signIn()" disabled>ACCEDI</button>
    <div id="result"></div>

    <script>
        const CLIENT_ID = '589546025220-gblcf5jnk45vsst58c03n4r87er8sg30.apps.googleusercontent.com';
        const API_KEY = 'AIzaSyDKaQZVRy5V5lYSEK5fyOqBFMjFbT6giSs';
        const SCOPES = 'https://www.googleapis.com/auth/drive.file';

        function initClient() {
            console.log('Inizializzazione...');
            gapi.load('client:auth2', () => {
                gapi.client.init({
                    apiKey: API_KEY,
                    clientId: CLIENT_ID,
                    discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'],
                    scope: SCOPES
                }).then(() => {
                    console.log('SUCCESSO!');
                    document.getElementById('status').innerHTML = 'âœ… PRONTO';
                    document.getElementById('login-btn').disabled = false;
                }, (error) => {
                    console.error('ERRORE:', error);
                    document.getElementById('status').innerHTML = 'ERRORE: ' + error.error;
                });
            });
        }

        function signIn() {
            gapi.auth2.getAuthInstance().signIn();
        }

        initClient();
    </script>
</body>
</html>
